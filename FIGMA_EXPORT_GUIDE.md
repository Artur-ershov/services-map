# Руководство по экспорту SVG из Figma

## Текущая ситуация

**Лимит запросов к Figma API достигнут.** Для автоматизации через MCP нужен доступ к Figma MCP серверу без лимитов.

## Способы экспорта SVG из Figma

### Вариант 1: Ручной экспорт из Figma (рекомендуется сейчас)

1. Откройте файл Figma: `https://www.figma.com/design/MUjKq30tTItxa1RBJYUCYb/...`
2. Выберите нужный этаж (например, B1-F3, node ID: 72:24)
3. В Figma: **File → Export → SVG**
4. Сохраните файл в папку `map/` с правильным именем:
   - `floor-B1-F3.svg`
   - `floor-B3-F1.svg`
   - и т.д.

### Вариант 2: Figma Plugin для массового экспорта

Можно создать Figma Plugin, который:
- Читает конфигурацию из `figma-config.js`
- Экспортирует все этажи одним кликом
- Сохраняет SVG файлы с правильными именами

### Вариант 3: Figma API (после снятия лимита)

Через MCP инструменты:
- `mcp_Figma_get_design_context` - для получения SVG кода
- `mcp_Figma_get_metadata` - для получения структуры

**Ограничение:** Лимит запросов (rate limit) - нужно подождать или использовать платный план Figma.

## Конфигурация для экспорта

В `figma-config.js` есть маппинг этажей:

```javascript
floorMapping: {
    'B1-F3': {
        nodeId: '72:24',
        building: 'B1',
        floor: 3,
        fileName: 'floor-B1-F3.svg'
    },
    'B3-F1': {
        nodeId: '', // Заполните реальным node ID
        building: 'B3',
        floor: 1,
        fileName: 'floor-B3-F1.svg'
    }
}
```

## Структура файлов

После экспорта SVG файлы должны быть в папке `map/`:
```
map/
  ├── floor-B1-F3.svg
  ├── floor-B3-F1.svg
  └── floors.svg
```

## Обновление data.js

После экспорта SVG нужно обновить `svgFloorPlans` в `data.js`:

```javascript
const svgFloorPlans = {
    'B1-F3': {
        src: 'map/floor-B1-F3.svg',
        viewBox: '0 0 1991 909' // Обновите на основе реальных размеров
    },
    // ...
};
```

## Рекомендации

1. **Сначала экспортируйте основные этажи** (B1-F3, B3-F1)
2. **Проверьте соответствие areaId** - ID слоев в SVG должны совпадать с areaId в data.js
3. **Обновите viewBox** на основе реальных размеров SVG
4. **Используйте figma-mapping.csv** для проверки соответствия слоев

## Автоматизация в будущем

Для полной автоматизации можно:
1. Создать Figma Plugin для массового экспорта
2. Использовать Figma API (требует платный план или снятие лимита)
3. Создать скрипт, который использует MCP инструменты (после снятия лимита)






