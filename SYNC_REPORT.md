# Отчет о синхронизации CSV → data.js

## Дата синхронизации
2026-01-14 07:23:23

## Статистика

- **Загружено строк из CSV:** 108
- **Обработано сервисов:** 108
- **Сервисов в макетах:** 80
- **Размер data.js:** 75,960 байт

## Выполненные действия

### 1. Синхронизация CSV → data.js
✅ Скрипт `scripts/sync-csv-to-data.py` успешно выполнен
✅ Создан файл `data-generated.js` со всеми сервисами из CSV
✅ Данные нормализованы:
   - Корпуса: Альфа → B1, Бета → B2
   - Категории: Переговорные → meeting, Питание → food, и т.д.
   - Локации использованы для генерации areaId

### 2. Применение изменений
✅ Создан бэкап текущего data.js: `backups/data_20260114_072323.js`
✅ Файл data.js обновлен на основе data-generated.js
✅ Все изменения применены успешно

## Созданные файлы

1. **data.js** - обновленный файл с данными (основной файл)
2. **data-generated.js** - исходный сгенерированный файл (можно удалить после проверки)
3. **backups/data_20260114_072323.js** - бэкап предыдущей версии
4. **figma-mapping.csv** - маппинг для работы с Figma
5. **figma-mapping.json** - JSON версия маппинга

## Структура данных

### Корпуса
- B1 (Альфа) - основной корпус
- B2 (Бета) - второй корпус
- PARKING (Парковка) - парковка

### Категории
- meeting (Переговорные)
- food (Питание)
- service (Сервис)
- eco (Эко-инициативы)
- relax (Релакс)
- sport (Спорт)
- health (Здоровье)
- beauty (Красота)
- other (Без категории)

### Генерация areaId

**С локацией:**
- Локация: "108" → areaId: `area_108`
- Локация: "3Б" → areaId: `area_3Б`
- Локация: "402 Б" → areaId: `area_402-Б`

**Без локации:**
- Название: "КРОК кофе" → areaId: `service_КРОК-кофе`
- Название: "Гардероб" → areaId: `service_Гардероб`

## Следующие шаги

### 1. Проверка данных
- [ ] Проверить корректность данных в data.js
- [ ] Проверить соответствие areaId с Figma/SVG
- [ ] Проверить работу приложения

### 2. Работа с Figma
- [ ] Открыть figma-mapping.csv в Excel/Google Sheets
- [ ] Использовать для переименования слоев в Figma
- [ ] Создать структуру папок: Building_{B1}/Floor_{N}/Services
- [ ] Убедиться, что ID слоев = areaId из data.js

### 3. Обновление SVG файлов
- [ ] Экспортировать обновленные SVG из Figma
- [ ] Сохранить в папку map/
- [ ] Обновить svgFloorPlans в data.js (если нужно)

### 4. Проверка приложения
- [ ] Запустить приложение
- [ ] Проверить отображение сервисов на карте
- [ ] Проверить фильтрацию и поиск
- [ ] Убедиться, что все сервисы связаны корректно

## Важные заметки

1. **Бэкапы автоматически создаются** в папке `backups/`
2. **data-generated.js** можно удалить после проверки
3. **figma-mapping.csv** используется для работы с Figma
4. **Всегда проверяйте** данные перед применением изменений

## Автоматизация

### Повторная синхронизация
Если CSV обновился, просто запустите:
```bash
python scripts/sync-csv-to-data.py "карта сервисов рабочая таблица.xlsx - Sheet1.csv"
python scripts/apply-generated-data.py
```

### Откат изменений
Если нужно вернуться к предыдущей версии:
```bash
copy backups\data_20260114_072323.js data.js
```

## Контакты

При возникновении проблем:
1. Проверьте логи выполнения скриптов
2. Проверьте бэкапы в папке `backups/`
3. Убедитесь, что CSV файл корректно отформатирован





