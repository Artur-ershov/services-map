# Настройка подсчета калорий для буфета

## Что сделано

1. ✅ Создан CSV файл для импорта в Tilda Store с полями КБЖУ
2. ✅ Обновлен код для чтения КБЖУ из данных Tilda
3. ✅ Разделены корзина и дневник калорий (отдельные кнопки)

## Шаги для настройки

### 1. Импорт CSV в Tilda Store

1. Откройте Tilda → Каталог товаров
2. Нажмите "Импорт" → "Импорт из CSV"
3. Выберите файл: `tilda-import-with-nutrition.csv`
4. Убедитесь, что колонки "Ккал", "Белки", "Жиры", "Углеводы" импортируются как дополнительные поля
5. Завершите импорт

### 2. Отображение КБЖУ на странице (опционально)

Если хотите, чтобы КБЖУ отображалось на карточках товаров:

1. В редакторе Tilda откройте блок с товарами буфета
2. Добавьте текстовый блок с данными КБЖУ в формате:
   ```
   КБЖУ: 199 / 5 / 12 / 17
   ```
   или
   ```
   199 ккал, Б: 5, Ж: 12, У: 17
   ```

### 3. Как это работает

- **Кнопка "В корзину"** - добавляет товар в корзину Tilda (для заказа)
- **Кнопка "+ В дневник"** - добавляет товар в дневник калорий (для подсчета)

Кнопки работают независимо друг от друга.

### 4. Если КБЖУ не найдено

Если для товара не найдены данные КБЖУ в Tilda, система использует приблизительные значения из маппинга по названию.

## Файлы

- **`tilda-buffet-calories-block.html`** — **модуль для вставки в блок T123 (HTML)** на /eda. Выводит КБЖУ и кнопку «+ Съел» у товаров Буфета и Бизнес-завтрака. Размещать блок после каталога Tilda Store.
- `tilda-import-with-nutrition.csv` - CSV для импорта в Tilda с полями КБЖУ
- `scripts/prepare-buffet-nutrition-csv.js` - скрипт для подготовки CSV (если нужно обновить)

## Примечания

- Чай (черный и зеленый) имеет КБЖУ = 0 (это нормально)
- Все остальные товары имеют заполненные данные КБЖУ из PDF меню
- Данные взяты из файлов "Меню бизнес-завтрака.pdf" и "Меню Буфета.pdf"
